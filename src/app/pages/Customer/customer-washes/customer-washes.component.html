<div class="washes-container" dir="rtl">
  <div *ngIf="successMessage" class="success-alert">{{ successMessage }}</div>

<!-- }  }    gap: 15px;    flex-direction: column;  .rewards-header {  }    grid-template-columns: 1fr;  .rewards-grid {@media (max-width: 480px) {}  }    overflow-x: auto;  .category-filter {  }    grid-template-columns: repeat(2, 1fr);  .rewards-grid {@media (max-width: 768px) {}  font-size: 16px;  color: #6B7280;.empty-state p {}  margin-bottom: 15px;  display: block;  font-size: 48px;.empty-icon {}  border-radius: 12px;  background: white;  padding: 60px 20px;  text-align: center;.empty-state {}  cursor: not-allowed;  background: #D1D5DB;.redeem-btn:disabled {}  background: #2563EB;.redeem-btn:hover:not(:disabled) {}  transition: all 0.3s ease;  font-weight: bold;  cursor: pointer;  border-radius: 8px;  border: none;  color: white;  background: #3B82F6;  padding: 10px;  width: 100%;.redeem-btn {}  margin: 10px 0;  color: #EF4444;  font-size: 12px;.expiry {}  color: #6B7280;  font-size: 12px;.points-text {}  transition: width 0.3s ease;  height: 100%;  background: linear-gradient(90deg, #3B82F6, #8B5CF6);.progress-fill {}  margin-bottom: 6px;  overflow: hidden;  border-radius: 10px;  height: 6px;  background: #E5E7EB;.progress-bar {}  margin: 15px 0;.points-section {}  display: inline-block;  margin: 10px 0;  font-weight: 600;  font-size: 12px;  border-radius: 6px;  padding: 6px 12px;  color: #3B82F6;  background: #F3F4F6;.merchant-tag {}  min-height: 35px;  margin: 10px 0;  font-size: 14px;  color: #6B7280;.description {}  color: #1F2937;  margin: 10px 0;.reward-card h3 {}  margin-bottom: 10px;  font-size: 40px;.reward-icon {}  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);  transform: translateY(-5px);.reward-card:hover {}  transition: all 0.3s ease;  text-align: center;  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);  border-radius: 12px;  padding: 20px;  background: white;.reward-card {}  gap: 20px;  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));  display: grid;.rewards-grid {}  border-color: #3B82F6;  color: white;  background: #3B82F6;.category-btn.active {}  color: #3B82F6;  border-color: #3B82F6;.category-btn:hover {}  color: #6B7280;  transition: all 0.3s ease;  font-weight: 500;  cursor: pointer;  border-radius: 20px;  background: white;  border: 2px solid #E5E7EB;  padding: 8px 16px;.category-btn {}  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);  flex-wrap: wrap;  gap: 10px;  display: flex;  margin-bottom: 25px;  border-radius: 12px;  padding: 15px;  background: white;.category-filter {}.rewards-content {}  100% { transform: rotate(360deg); }  0% { transform: rotate(0deg); }@keyframes spin {}  margin: 40px auto;  animation: spin 1s linear infinite;  height: 40px;  width: 40px;  border-radius: 50%;  border-top: 4px solid #3B82F6;  border: 4px solid #f3f3f3;.loader {}  font-weight: bold;  border-radius: 20px;  padding: 10px 20px;  color: white;  background: linear-gradient(135deg, #F59E0B, #D97706);.points-badge {}  color: #1F2937;  margin: 0;.rewards-header h1 {}  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);  align-items: center;  justify-content: space-between;  display: flex;  margin-bottom: 25px;  border-radius: 12px;  padding: 20px;  background: white;.rewards-header {}  margin: 0 auto;  max-width: 1200px;  min-height: 100vh;  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); -->
  <div class="washes-header">
    <h1>Ø­Ø¬Ø² ØºØ³Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h1>
  </div>

  <div class="loader" *ngIf="isLoading && merchants.length === 0"></div>

  <div *ngIf="!selectedMerchant" class="merchants-grid">
    <h2>Ø§Ù„Ù…ØºØ³Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
    <div class="merchants-list">
      <div *ngFor="let merchant of merchants" 
           (click)="selectMerchant(merchant)"
           class="merchant-card">
        <div class="merchant-header">
          <h3>{{ merchant.name }}</h3>
          <span class="rating">â­ {{ merchant.rating }}</span>
        </div>
        <p class="location">ğŸ“ {{ merchant.location }}</p>
        <p class="distance">{{ merchant.distance }} ÙƒÙ…</p>
        <button class="select-btn">Ø§Ø®ØªØ±</button>
      </div>
    </div>
  </div>

  <div *ngIf="selectedMerchant" class="services-section">
    <div class="back-btn">
      <button (click)="selectMerchant(null)" class="btn-back">â† Ø±Ø¬ÙˆØ¹</button>
    </div>
    <h2>{{ selectedMerchant.name }}</h2>
    <div class="merchant-info">
      <p>ğŸ“ {{ selectedMerchant.location }}</p>
      <p>â­ {{ selectedMerchant.rating }} ØªÙ‚ÙŠÙŠÙ…</p>
      <p>ğŸ“ {{ selectedMerchant.distance }} ÙƒÙ…</p>
    </div>

    <h3>Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
    <div class="services-grid">
      <div *ngFor="let service of selectedMerchant.availableServices" 
           class="service-card">
        <div class="service-icon">{{ service.icon }}</div>
        <h4>{{ service.name }}</h4>
        <p class="duration">â±ï¸ {{ service.duration }} Ø¯Ù‚ÙŠÙ‚Ø©</p>
        <p class="price">{{ service.price }} Ø±ÙŠØ§Ù„</p>
        <button (click)="selectService(service)" class="book-btn">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
      </div>
    </div>
  </div>

  <!-- Booking Modal -->
  <div *ngIf="showBookingModal" class="modal-overlay" (click)="closeBookingModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button (click)="closeBookingModal()" class="modal-close">âœ•</button>
      <h3>{{ selectedService?.name }}</h3>
      <div class="booking-details">
        <p><strong>{{ selectedMerchant?.name }}</strong></p>
        <p class="price">{{ selectedService?.price }} Ø±ÙŠØ§Ù„</p>
      </div>

      <div class="booking-form">
        <div class="form-group">
          <label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
          <input type="date" [(ngModel)]="bookingDate">
        </div>
        <div class="form-group">
          <label>Ø§Ù„ÙˆÙ‚Øª</label>
          <input type="time" [(ngModel)]="bookingTime">
        </div>
        <button (click)="confirmBooking()" [disabled]="isLoading" class="confirm-btn">
          {{ isLoading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...' : 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²' }}
        </button>
      </div>
    </div>
  </div>
</div>
